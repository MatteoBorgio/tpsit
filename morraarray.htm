<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Morra Array 1</title>
    <style>

        body {
            margin: 10px;
            font-family: 'Arial', sans-serif;
            text-align: center;
            align-items: center;
            display: flex;
            flex-direction: column;
            margin-top: 1%;
        }

        #out1, #out2, #out3, #out4, #out5{
            font-family: 'Courier New', Courier, monospace;
            font-size: 20px;
            margin-top: 10px;
        }

        .container {
            width: auto;
            text-align: center;
            align-items: center;
            display: flex;
            flex-direction: column;
            margin-top: 1%;
            padding: 10%;
            border: 1px solid green;
            border-radius: 5px;
            
            
        }
        
    </style>
</head>

<body>

    <div class="container">
    <h1>Morra Cinese</h1>

    <label for = "tiri">Inserisci il numero di lanci: </label>
    <input type="number" id="tiri">

    <div class="button">
        <button onclick="inizia_partita()">Tira entrambi</button>
    </div>
    
    <h3>Giocatore 1</h3>
    <p id="out1"></p>

    <h3>Giocatore 2</h3>
    <p id="out2"></p>

    <h3>Punteggio singolo lancio</h3>
    <p id="out3"></p>

    <h3>Punteggio Finale</h3>

    <p id="out4"></p>

    <h3>Vincitore: </h3>

    <p id="out5"></p>

    </div>

    <script>
        let morra_array = ["Sasso", "Carta", "Forbice"];
        let giocatore1;
        let giocatore2;
        let interval = 0;
        let punteggio_giocatore1 = 0;
        let punteggio_giocatore2 = 0;

        function inizia_partita() {

            if (interval === 0) {
                let numero_tiri = document.getElementById("tiri").value;
                let count = 0;  
                interval = setInterval(function() {
                tira_entrambi(); 
                count++;
            if (count >= numero_tiri) {
                clearInterval(interval); 
                interval = 0; 
                finisci_partita();
            }
        }, 100); 
    }
}
        function tira_entrambi() {

            let numero_casuale1 = Math.floor(Math.random() * 3);
            giocatore1 = morra_array[numero_casuale1];
            document.getElementById("out1").innerHTML = "Il giocatore 1 ha scelto " + giocatore1;

            let numero_casuale2 = Math.floor(Math.random() * 3);
            giocatore2 = morra_array[numero_casuale2];
            document.getElementById("out2").innerHTML = "Il giocatore 2 ha scelto " + giocatore2;

            risultato_morra();
        }

        function risultato_morra() {
            let risultato_array = ["Pareggio", "Giocatore 1 vince", "Giocatore 2 vince"];
            let risultato;

            if (!giocatore1 || !giocatore2) {
                document.getElementById("out3").innerHTML = "Entrambi i giocatori devono fare il tiro!";
                return;
            }
            if (giocatore1 === giocatore2) {
                risultato = risultato_array[0];
            } else if (
                (giocatore1 === "Sasso" && giocatore2 === "Carta") ||
                (giocatore1 === "Carta" && giocatore2 === "Forbice") ||
                (giocatore1 === "Forbice" && giocatore2 === "Sasso")
            ) {
                risultato = risultato_array[2];
            } else {
                risultato = risultato_array[1];
            }

            document.getElementById("out3").innerHTML = risultato;

            if (risultato === risultato_array[1]) {
                punteggio_giocatore1++;
            } else if (risultato === risultato_array[2]) {
                punteggio_giocatore2++;
            }
            
            document.getElementById("out4").innerHTML = "Punteggio Giocatore 1: " + punteggio_giocatore1 + "<br> Punteggio Giocatore 2: " + punteggio_giocatore2;

        }

        function finisci_partita() {

            clearInterval(interval);
            interval = 0;
            document.getElementById("out1").innerHTML = "";
            document.getElementById("out2").innerHTML = "";
            document.getElementById("out3").innerHTML = "";
            document.getElementById("out1").style.display = "none";
            document.getElementById("out2").style.display = "none";
            document.getElementById("out3").style.display = "none";

            if (punteggio_giocatore1 == punteggio_giocatore2) {
                document.getElementById("out5").innerHTML = "Pareggio!";
            }
            else if (punteggio_giocatore1 > punteggio_giocatore2) {
                document.getElementById("out5").innerHTML = "Il Giocatore 1 vince!";
            }
            else if (punteggio_giocatore2 > punteggio_giocatore1) {
                document.getElementById("out5").innerHTML = "Il Giocatore 2 vince!";
            }

        }

    </script> 

</body>
</html>
